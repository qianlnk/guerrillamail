FetchEmail
==========

-	Description

	Get the contents of an email.

	Notes:

	-	All HTML in the body of the email is filtered. Eg, Javascript, applets, iframes, etc is removed.

	-	All images in the email are relative to https://www.guerrillamail.com/res.php - this script will generate a ‘blocked by GM’ image, indicating that the image was blocked. The CGI parameters for this script are as follows: r = Is it a resource? 1 if true. Always 1 n= Node. The HTML element type. Can be a string of letters (a-z) q= The query string for the original image. This is URL Encoded Example URL: https://www.guerrillamail.com/res.php?r=1&n=img&q=http%3A%2F%2Fstatic.groupon.de%2Fnewsletter_ums%2Flogo_groupon_de_DE.gif When an email is displayed by the client, it should displayed the blocked images generated by res.php. When a ‘Display Images’ button is clicked, the client should use a regular expression to replace the links to res.php with the links to the image found in the ‘q’ parameter. Here is an example of this regular expression in the Javascript client:

	-	Subject and email excerpt are escaped using HTML Entities.

	-	Only emails owned by the current session id can be fetched.

-	Function

	fetch_email

-	Arguments

	‘sid_token’ - Session ID token returned from get_email_address

	email_id - The id of the email to fetch

-	Returns

	Returns false if not found, or an array with the following properties:

	mail_id - an integer mail_from - email address of sender

	mail_recipient - email address of receiver mail_subject - UTF-8 encoded string of the email’s subject

	mail_excerpt - a short excerpt of the email mail_body - The message part of the email. May contain filtered HTML as described above

	mail_timestamp - unix timestamp of arrival mail_date - Date of arrival in the following format if less than 24 hours: H:M:S, or Y-M-D if older than 24

	mail_read - 0 or 1 indicating if email was fetched before

	content_type - MIME type for the mail_body, can be text/plain or text/html

	‘sid_token’ - Session ID token
